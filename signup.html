<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/loginStyle.css">
    <title>GreatMealz - Registro</title>
  </head>
  <body>
    <div class="wrapper fadeInDown">
      <div id="formContent">
        <!-- Tabs Titles -->
    
        <!-- Icon -->
        <div class="fadeIn first">
          <img src="./img/logo.png" alt="logo" style="width:200px">
        </div>
    
        <!-- Login Form -->
        <form>
          <input type="text" id="txtEmail" class="fadeIn second" name="email" placeholder="Email">
          <input type="password" id="txtPassword" class="fadeIn third" name="password" placeholder="Contraseña">
          <input type="password" id="txtPasswordConfirm" class="fadeIn third" name="password" placeholder="Confirmar Contraseña">
          <input type="button" class="fadeIn fourth" value="Regístrate" onclick="signup()">
        </form>
    
        <!-- Remind Passowrd -->
        <div id="formFooter">
          <a class="underlineHover" onclick="window.location.href = 'login.html'">¿Ya tienes una cuenta? ¡Inicia Sesión!</a> 
        </div>
    
      </div>
    </div>
    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
    <!-- JQUERY  -->
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"></script>
    <!-- SWAL -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.16.0/dist/sweetalert2.all.min.js"></script>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.6.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.3/firebase-auth.js"></script>

    <script>
            // Your web app's Firebase configuration
      var firebaseConfig = {
        apiKey: "AIzaSyDAggylupkweGsMpSlk5Kaz3EkG2keFJvE",
        authDomain: "greatmealz.firebaseapp.com",
        projectId: "greatmealz",
        storageBucket: "greatmealz.appspot.com",
        messagingSenderId: "969476681075",
        appId: "1:969476681075:web:7545fb2ae3404503122906"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      var signup = () => {
        if($('#txtEmail').val() == '' || $('#txtPassword').val() == '' || $('#txtPasswordConfirm').val() == '') {
          Swal.fire(
            '¡Error!',
            'Todos los campos son mandatorios',
            'warning'
          )
        } else if ($('#txtEmail').val() < 8) {
          Swal.fire(
            '¡Error!',
            'La contraseña debe de ser mayor a 8 caracteres',
            'warning'
          )
        } else if($('#txtPassword').val() != $('#txtPasswordConfirm').val()) {
          Swal.fire(
            '¡Error!',
            '¡Las contraseñas deben de ser las mismas!',
            'warning'
          )
        } else {
          console.log("registrando")
          firebase.auth()
          .createUserWithEmailAndPassword($('#txtEmail').val(), $('#txtPassword').val())
          .then(() => {
            Swal.fire({
            icon: 'success',
            title: 'Exitoso',
            text: '¡Se ha registrado correctamente!',
            confirmButtonText: `OK`,
            }).then((e) => {
              if (e.isConfirmed) {
                window.location.href = "login.html"
              }
            })
          })
          .catch(() => {
              Swal.fire(
              '¡Error!',
              'Se ha generado un error en el registro',
              'error'
            )
          });
        }
      }
    </script>

    <script>

    </script>
  </body>
</html>